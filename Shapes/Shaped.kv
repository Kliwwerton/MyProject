<Shaped>
    title: 'Расчёт площади фасонного изделия'
    size_hint: 0.85, 0.8
    auto_dismiss: False
    on_open:
        self.build_instance()

    BoxLayout:
        orientation: 'vertical'
        spacing: 5

        Label:
            id: label_gost_number
            text: ''
            size_hint: 1, 0.15

        BoxLayout:
            size_hint: 1, 0.2

            Label:
                id: length_label
                size_hint: 0.6, 1
                text: 'Длина(L), мм:'
                text_size: self.size
                halign: 'left'
                valign: 'center'

            TextInput:
                id: length_value
                size_hint: 0.3, 1
                text: ''
                multiline: False
                halign: 'center'
                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                input_tipe: 'number'
                input_filter: 'float'

            Button:
                text: '...'
                size_hint: 0.1, 1
                on_press:
                    root.open_calculation_average_popup(length_value)

        BoxLayout:
            size_hint: 1, 0.2

            Label:
                id: width_label
                size_hint: 0.6, 1
                text: 'Ширина(H), мм:'
                text_size: self.size
                halign: 'left'
                valign: 'center'

            TextInput:
                id: width_value_1
                size_hint: 0.3, 1
                text: ''
                multiline: False
                halign: 'center'
                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                input_tipe: 'number'
                input_filter: 'float'

            Button:
                text: '...'
                size_hint: 0.1, 1
                on_press:
                    root.open_calculation_average_popup(width_value_1)

        BoxLayout:
            size_hint: 1, 0.2

            Label:
                id: width_label_2
                size_hint: 0.6, 1
                markup: True
                text: 'Ширина(H[sub]1[/sub]), мм:'
                text_size: self.size
                halign: 'left'
                valign: 'center'

            TextInput:
                id: width_value_2
                size_hint: 0.3, 1
                text: ''
                multiline: False
                halign: 'center'
                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                input_tipe: 'number'
                input_filter: 'float'

            Button:
                text: '...'
                size_hint: 0.1, 1
                on_press:
                    root.open_calculation_average_popup(width_value_2)

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 0.5

            Label:
                size_hint: 1, 0.2
                text: 'Толщина, мм'

            GridLayout:
                size_hint: 1, 0.8
                cols: 4

                Label:
                    id: thickness_label_S
                    markup: True
                    text: '(S):'
                    text_size: self.size
                    halign: 'center'
                    valign: 'center'

                Label:
                    markup: True
                    text: '(S[sub]1[/sub]):'
                    text_size: self.size
                    halign: 'center'
                    valign: 'center'

                Label:
                    markup: True
                    text: '(S[sub]2[/sub]):'
                    text_size: self.size
                    halign: 'center'
                    valign: 'center'

                Label:
                    markup: True
                    text: '(S[sub]3[/sub]):'
                    text_size: self.size
                    halign: 'center'
                    valign: 'center'

                TextInput:
                    id: thickness_value_S
                    text: ''
                    multiline: False
                    halign: 'center'
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                    input_tipe: 'number'
                    input_filter: 'float'

                TextInput:
                    id: thickness_value_S1
                    text: ''
                    multiline: False
                    halign: 'center'
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                    input_tipe: 'number'
                    input_filter: 'float'

                TextInput:
                    id: thickness_value_S2
                    text: ''
                    multiline: False
                    halign: 'center'
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                    input_tipe: 'number'
                    input_filter: 'float'

                TextInput:
                    id: thickness_value_S3
                    text: ''
                    multiline: False
                    halign: 'center'
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                    input_tipe: 'number'
                    input_filter: 'float'

        BoxLayout:
            size_hint: 1, 0.2

            Label:
                text: 'Вес изделия, грамм: '
                size_hint: 0.6, 1
                halign: 'left'
                valign: 'center'
                text_size: self.size

            TextInput:
                id: weight_product
                text: ''
                multiline: False
                size_hint: 0.3, 1
                hint_text: 'Вес изделия'
                halign: 'center'
                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                input_tipe: 'number'
                input_filter: 'float'
                on_text_validate:
                    root.calculation()

            Button:
                text: 'P'
                size_hint: 0.1, 1
                on_press:
                    root.check_value(var=1)
                    root.calculation()

        BoxLayout:
            size_hint: 1, 0.2

            Label:
                markup: True
                text: 'Объёмный вес, г/см[sup]3[/sup]: '
                size_hint: 0.6, 1
                halign: 'left'
                valign: 'center'
                text_size: self.size

            TextInput:
                id: volume_weight_product
                text: ''
                multiline: False
                size_hint: 0.3, 1
                hint_text: 'm/V'
                halign: 'center'
                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                input_tipe: 'number'
                input_filter: 'float'
                on_text_validate:
                    root.calculation()

            Button:
                markup: True
                text: 'P'
                size_hint: 0.1, 1
                on_press:
                    root.check_value(var=2)
                    root.calculation()

        Image:
            id: image
            source: 'Images/Product_shape/shaped.png'
            size_hint: 1, 1.2
            size: self.parent.size

        Button:
            text: 'РАССЧИТАТЬ'
            size_hint: 0.8, 0.2
            pos_hint: {'center_x': 0.5}
            on_press:
                root.calculation()
                root.change_text()
                root.dismiss()

        BoxLayout:
            size_hint: 1, 0.2
            spacing: 5

            AnchorLayout:

                Button:
                    text: 'НАЗАД'
                    font_size: '10sp'
                    size_hint: 0.6, 0.8
                    background_color: 1,0,0,1
                    pos_hint: {'x': 0.6, 'y': 0.5}
                    on_release:
                        root.dismiss()
                        root.return_beck()

            AnchorLayout:

                Button:
                    text: 'ЗАКРЫТЬ'
                    font_size: '10sp'
                    size_hint: 0.6, 0.8
                    background_color: 1,0,0,1
                    pos_hint: {'x': 0.6, 'y': 0.5}
                    on_release:
                        root.dismiss()
